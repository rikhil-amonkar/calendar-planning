prioritized_friends = sorted(friends, key=lambda x: (time_to_minutes(x['end']) - time_to_minutes(x['start']), x['duration']))