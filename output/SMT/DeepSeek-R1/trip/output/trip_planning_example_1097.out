Valid itinerary:
London: Days 1 to 3
Reykjavik: Days 2 to 5
Lyon: Days 2 to 6
Madrid: Days 2 to 3
Warsaw: Days 2 to 5
Riga: Days 4 to 5
Dubrovnik: Days 7 to 8
Oslo: Days 16 to 18
