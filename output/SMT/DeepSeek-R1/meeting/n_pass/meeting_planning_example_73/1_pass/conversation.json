[
    {
        "role": "user",
        "content": "Given the following scheduling problem:\nYou are visiting San Francisco for the day and want to meet as many friends as possible. Solve the problem by considering various different schedules and picking the best one to optimize your goals.\n\nTravel distances (in minutes):\nRussian Hill to Pacific Heights: 7.\nPacific Heights to Russian Hill: 7.\n\nCONSTRAINTS: You arrive at Russian Hill at 9:00AM. Barbara will be at Pacific Heights from 7:15AM to 10:00PM. You'd like to meet Barbara for a minimum of 60 minutes.\n\nYour response should start with 'SOLUTION:'.\nWrite a Python program that solves it using the Z3 solver. Always surround your final code with ```python\nYOUR_CODE\n```.\n"
    },
    {
        "role": "assistant",
        "content": "SOLUTION:\n```python\nfrom z3 import *\n\ndef format_time(minutes):\n    hours = minutes // 60\n    mins = minutes % 60\n    period = \"AM\" if hours < 12 else \"PM\"\n    h = hours % 12\n    if h == 0:\n        h = 12\n    return f\"{h}:{mins:02d} {period}\"\n\ndef main():\n    # Initialize solver with optimization\n    opt = Optimize()\n    \n    # Departure time from Russian Hill (in minutes from midnight)\n    depart_rh = Int('depart_rh')\n    \n    # Constraints\n    # Must leave Russian Hill at or after 9:00 AM (540 minutes)\n    opt.add(depart_rh >= 540)\n    \n    # Calculate meeting start and end times\n    arrive_ph = depart_rh + 7  # Travel time to Pacific Heights\n    meet_end = arrive_ph + 60   # Meeting duration of 60 minutes\n    \n    # Meeting must end by 10:00 PM (1320 minutes)\n    opt.add(meet_end <= 1320)\n    \n    # Barbara is available from 7:15 AM (435 minutes), but constraint is redundant since depart_rh>=540\n    # Optimize: minimize departure time to meet as early as possible\n    opt.minimize(depart_rh)\n    \n    # Solve and output\n    if opt.check() == sat:\n        m = opt.model()\n        depart_val = m[depart_rh].as_long()\n        arrive_val = depart_val + 7\n        end_val = arrive_val + 60\n        \n        print(\"Optimal Schedule:\")\n        print(f\"Depart Russian Hill at {format_time(depart_val)}\")\n        print(f\"Arrive at Pacific Heights at {format_time(arrive_val)}\")\n        print(f\"Meet Barbara from {format_time(arrive_val)} to {format_time(end_val)}\")\n    else:\n        print(\"No valid schedule found\")\n\nif __name__ == '__main__':\n    main()\n```"
    }
]